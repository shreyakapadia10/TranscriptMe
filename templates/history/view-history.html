{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container">
    {% if histories %}
    <h2 class="text-center my-4">My Transcript History</h2>
    <table class="table table-striped table-hover my-3">
        <thead>
            <tr>
              <th scope="col" class="text-center">#</th>
              <th scope="col" class="text-center">Transcription Name</th>
              <th scope="col" class="text-center">Media Type</th>
              <th scope="col" class="text-center">Date</th>
              <th scope="col" class="text-center">Action</th>
              <th scope="col" class="text-center">Download Link</th>
            </tr>
          </thead>
          <tbody>
            {% for history in histories %}
                <tr>
                <th scope="row" class="text-center">{{ forloop.counter }}</th>
                <td class="text-center">{{ history.name|capfirst }}</td>
                <td class="text-center">{{ history.media_type|capfirst }}</td>
                <td class="text-center">{{ history.uploaded_at }}</td>
                <td class="text-center">
                  {% if history.job_id != ""  %}
                    {% if history.media_type == "text" %}
                      <a href="{% url 'TranscriptTextAppend' history.conversation_id %}" type="button" class="btn btn-primary">Append Another Text File</a></td>
                    {% elif history.media_type == "audio" %}
                      <a href="{% url 'TranscriptAudioAppend' history.conversation_id %}" type="button" class="btn btn-primary">Append Another Audio File</a></td>
                    {% elif history.media_type == "video" %}
                      <a href="{% url 'TranscriptVideoAppend' history.conversation_id %}" type="button" class="btn btn-primary">Append Another Video File</a></td>
                    {% elif history.media_type == "audio url" %}
                      <a href="{% url 'TranscriptAudioURLAppend' history.conversation_id %}" type="button" class="btn btn-primary">Append Another Audio URL</a></td>
                    {% elif history.media_type == "video url" %}
                      <a href="{% url 'TranscriptVideoURLAppend' history.conversation_id %}" type="button" class="btn btn-primary">Append Another Video URL</a></td>
                    {% endif %}
                  {% else %}
                    <h4>Can't append.</h4>
                  {% endif %}
                <td class="text-center">
                  {% if history.job_id != ""  %}
                    <a href="{% url 'DownloadFiles' history.job_id history.conversation_id %}" type="button" class="btn btn-success">Download Transcription</a>
                  {% else %}
                  <h4>No Download link available.</h4>
                  {% endif %}
                </td>
                </tr>
            {% endfor %}
          </tbody>
    </table>    
    {% else %}
    <div class="container mx-auto alert alert-info text-center" role="alert" style="max-width: 1024px; margin-top:100px;">
        <h4>No Transcript History Found! </h4>
        <br>
        <p>Start Transcripting Here! <a href="{% url 'Home' %}">Transcript Now!</a></p>
    </div>
    {% endif %}
</div>

{% endblock content %}